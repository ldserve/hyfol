
<div class="order-render__view">
<h1 class="heading h1 my-order__title">My Order</h1>

<div class="order-view__box">

    <ul class="d-flex orders-nav__list">

        <li class="order-all orders-nav__item"  data-action="true" data-index="1">
            {%- render 'icon', icon: 'cjj_all' -%}
            <span>All</span>
        </li>
        <li class="order-unpaid orders-nav__item"  data-action="false" data-index="2">
            {%- render 'icon', icon: 'cjj_unpaid' -%}
            <span>Unpaid</span>
        </li>
        
        <li class="order-shipped orders-nav__item" data-action="false" data-index="3">
            {%- render 'icon', icon: 'cjj_shipped' -%}
            <span>Shipped</span>
        </li>
    
        <li class="order-processing orders-nav__item" data-action="false" data-index="4">
            {%- render 'icon', icon: 'cjj_processing' -%}
            <span>Processing</span>
        </li>
        <li class="order-completed orders-nav__item" data-action="false" data-index="5">
            {%- render 'icon', icon: 'cjj_completed' -%}
            <span>Completed</span>
        </li>
        <li class="order-payment orders-nav__item" data-action="false" data-index="6">
            {%- render 'icon', icon: 'cjj_payment' -%}
            <span>Payment</span>
        </li>
    </ul>
   
    <div class="order__render-view">

        <div class="card order-item__card" aria-hidden="false" data-index="1">
            {%- if customer.orders_count == 0 -%}
            <div class="card__section">
                <div class="empty-state empty-state--extra-tight">
                  <div class="empty-state__icon">
                    {%- render 'icon', icon: 'package' -%}
                    <span class="empty-state__count">0</span>
                  </div>

                  <p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
  
                  <div class="empty-state__button-container">
                    <a href="{{ routes.all_products_collection_url }}" class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
                  </div>
                </div>
              </div>
            {%- else -%}
                
            {%- paginate customer.orders by 8 -%}
            {%- for order in customer.orders -%}
            <div class="order-box">
                <div class="order-title">
                    <div class="title-info d-flex">
                        <span class="title-info-name" data-url="{{ order.customer_url }}">{{ 'customer.order.order' | t  }}:{{ order.name }}</span>
                        <span class="title-info-data">{{ 'customer.order.date' | t }}:{{ order.created_at | date:   format: 'month_day_year' }}</span>
                    </div>
                    <div class="title-state">
                        <span>{{ order.financial_status_label }}</span>&nbsp;
                        <span>{{ order.fulfillment_status }}</span>
                    </div>
                </div>
                <ul class="order-body">
                    {%- for pro in order.line_items -%}
                    <li class="order-item__card-body">
                        <div class="d-flex" >
                            <div class="pro-img">
                                <a href="{{ pro.url }}">
                                    <img src="{{ pro.image | img_url: '90x90', scale: 2 }}"
                                        alt="{{ pro.image.alt | escape }}">
                                </a>
                            </div>

                            <div class="pro-info">
                                <div class="info-title d-flex">
                                <a class="pro-info__title" href="{{ pro.url }}">{{ pro.product.title }}</a>
                                <span class="info-price__scribe line-item__price--highlight">{{pro.original_price | money}}</span>
                                <span class="info-price ">{{ pro.final_line_price | money }}</span>
                                </div>
                 
                                <div class="info-style d-flex">
                                    <span class="style-title">{{ pro.variant.title }}</span>
                                    <span class="style-num">× {{ pro.quantity }}</span>
                                </div>

                                <p class="pro-info__text pro-info__discount">USE COUPONS OR {{pro.line_level_total_discount | money}}</p>
                                <p class="pro-info__text pro-info__paid">THE ACTUAL PAYMENT {{ pro.final_line_price | money }}</p>
                            </div>
                        </div>
                    </li>
                    {%- endfor -%}
                </ul>
                <div class="order-footer">
                    <div class="shipping">
                        <span>{{ 'customer.order.shipping' | t }}:{{ order.shipping_price | money }}</span>
                    </div>
                    <div class="all-total">
                        <span class="total">{{ 'customer.order.total' | t }}:{{ order.total_price | money }}</span>
                    </div>
                </div>
            </div>
            {%- endfor -%}
            {%- render 'pagination', paginate: paginate -%}
            {% assign dm_paginate_by = paginate.page_size %}
            {%- endpaginate -%}
            {%- endif -%}
        </div>
        <div class="card order-item__card"  aria-hidden="true" data-index="2">
            {%- assign empty_state = true -%}
            {%- if customer.orders_count == 0 -%}
                
            {%- paginate customer.orders by 8 -%}
            {%- for order in customer.orders -%}
            {% if order.financial_status=='pending' %}
            {%- assign empty_state = false -%}
            <div class="order-box">
                <div class="order-title">
                    <div class="title-info d-flex">
                        <span class="title-info-name" data-url="{{ order.customer_url }}">{{ 'customer.order.order' | t  }}:{{ order.name }}</span>
                        <span class="title-info-data">{{ 'customer.order.date' | t }}:{{ order.created_at | date:   format: 'month_day_year' }}</span>
                    </div>
                    <div class="title-state">
                        <span>{{ order.financial_status_label }}</span>&nbsp;
                        <span>{{ order.fulfillment_status }}</span>
                    </div>
                </div>
                <ul class="order-body">
                    {%- for pro in order.line_items -%}
                    <li class="order-item__card-body">
                        <div class="d-flex" >
                            <div class="pro-img">
                                <a href="{{ pro.url }}">
                                    <img src="{{ pro.image | img_url: '90x90', scale: 2 }}"
                                        alt="{{ pro.image.alt | escape }}">
                                </a>
                            </div>

                            <div class="pro-info">
                                <div class="info-title d-flex">
                                <a class="pro-info__title" href="{{ pro.url }}">{{ pro.product.title }}</a>
                                <span class="info-price__scribe line-item__price--highlight">{{pro.original_price | money}}</span>
                                <span class="info-price ">{{ pro.final_line_price | money }}</span>
                                </div>
                 
                                <div class="info-style d-flex">
                                    <span class="style-title">{{ pro.variant.title }}</span>
                                    <span class="style-num">× {{ pro.quantity }}</span>
                                </div>

                                <p class="pro-info__text pro-info__discount">USE COUPONS OR {{pro.line_level_total_discount | money}}</p>
                                <p class="pro-info__text pro-info__paid">THE ACTUAL PAYMENT {{ pro.final_line_price | money }}</p>
                            </div>
                        </div>
                    </li>
                    {%- endfor -%}
                </ul>
                <div class="order-footer">
                    <div class="shipping">
                        <span>{{ 'customer.order.shipping' | t }}:{{ order.shipping_price | money }}</span>
                    </div>
                    <div class="all-total">
                        <span class="total">{{ 'customer.order.total' | t }}:{{ order.total_price | money }}</span>
                    </div>
                </div>
            </div>
            {%- endif -%}
            {%- endfor -%}
            {%- render 'pagination', paginate: paginate -%}
            {% assign dm_paginate_by = paginate.page_size %}
            {%- endpaginate -%}
            {%- endif -%}
            {%- if empty_state -%}
            <div class="card__section">
                <div class="empty-state empty-state--extra-tight">
                  <div class="empty-state__icon">
                    {%- render 'icon', icon: 'package' -%}
                    <span class="empty-state__count">0</span>
                  </div>
  
                  <p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
  
                  <div class="empty-state__button-container">
                    <a href="{{ routes.all_products_collection_url }}" class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
                  </div>
                </div>
              </div>
            {%- endif -%}
        </div>
        <div class="card order-item__card"  aria-hidden="true" data-index="3">
            {%- assign empty_state = true -%}
            {%- if customer.orders_count != 0 -%}
            {%- paginate customer.orders by 8 -%}
            {%- for order in customer.orders -%}
            {% if order.financial_status=='in progress' %}
            {%- assign empty_state = false -%}
            <div class="order-box">
                <div class="order-title">
                    <div class="title-info d-flex">
                        <span class="title-info-name" data-url="{{ order.customer_url }}">{{ 'customer.order.order' | t  }}:{{ order.name }}</span>
                        <span class="title-info-data">{{ 'customer.order.date' | t }}:{{ order.created_at | date:   format: 'month_day_year' }}</span>
                    </div>
                    <div class="title-state">
                        <span>{{ order.financial_status_label }}</span>&nbsp;
                        <span>{{ order.fulfillment_status }}</span>
                    </div>
                </div>
                <ul class="order-body">
                    {%- for pro in order.line_items -%}
                    <li class="order-item__card-body">
                        <div class="d-flex" >
                            <div class="pro-img">
                                <a href="{{ pro.url }}">
                                    <img src="{{ pro.image | img_url: '90x90', scale: 2 }}"
                                        alt="{{ pro.image.alt | escape }}">
                                </a>
                            </div>

                            <div class="pro-info">
                                <div class="info-title d-flex">
                                <a class="pro-info__title" href="{{ pro.url }}">{{ pro.product.title }}</a>
                                <span class="info-price__scribe line-item__price--highlight">{{pro.original_price | money}}</span>
                                <span class="info-price ">{{ pro.final_line_price | money }}</span>
                                </div>
                 
                                <div class="info-style d-flex">
                                    <span class="style-title">{{ pro.variant.title }}</span>
                                    <span class="style-num">× {{ pro.quantity }}</span>
                                </div>

                                <p class="pro-info__text pro-info__discount">USE COUPONS OR {{pro.line_level_total_discount | money}}</p>
                                <p class="pro-info__text pro-info__paid">THE ACTUAL PAYMENT {{ pro.final_line_price | money }}</p>
                            </div>
                        </div>
                    </li>
                    {%- endfor -%}
                </ul>
                <div class="order-footer">
                    <div class="shipping">
                        <span>{{ 'customer.order.shipping' | t }}:{{ order.shipping_price | money }}</span>
                    </div>
                    <div class="all-total">
                        <span class="total">{{ 'customer.order.total' | t }}:{{ order.total_price | money }}</span>
                    </div>
                </div>
            </div>
            {%- endif -%}
            {%- endfor -%}
            {%- render 'pagination', paginate: paginate -%}
            {% assign dm_paginate_by = paginate.page_size %}
            {%- endpaginate -%}
            {%- endif -%}
            {%- if empty_state -%}
            <div class="card__section">
                <div class="empty-state empty-state--extra-tight">
                  <div class="empty-state__icon">
                    {%- render 'icon', icon: 'package' -%}
                    <span class="empty-state__count">0</span>
                  </div>
  
                  <p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
  
                  <div class="empty-state__button-container">
                    <a href="{{ routes.all_products_collection_url }}" class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
                  </div>
                </div>
              </div>
            {%- endif -%}
        </div>
        <div class="card order-item__card"  aria-hidden="true" data-index="4">
            {%- assign empty_state = true -%}
            {%- if customer.orders_count != 0 -%}
            {%- paginate customer.orders by 8 -%}
            {%- for order in customer.orders -%}
            {% if order.financial_status=='on hold' %}
            {%- assign empty_state = false -%}
            <div class="order-box">
                <div class="order-title">
                    <div class="title-info d-flex">
                        <span class="title-info-name"><span data-url="{{ order.customer_url }}">{{ 'customer.order.order' | t  }}:{{ order.name }}</span></span>
                        <span class="title-info-data">{{ 'customer.order.date' | t }}:{{ order.created_at | date:   format: 'month_day_year' }}</span>
                    </div>
                    <div class="title-state">
                        <span>{{ order.financial_status_label }}</span>&nbsp;
                        <span>{{ order.fulfillment_status }}</span>
                    </div>
                </div>
                <ul class="order-body">
                    {%- for pro in order.line_items -%}
                    <li class="order-item__card-body">
                        <div class="d-flex" >
                            <div class="pro-img">
                                <a href="{{ pro.url }}">
                                    <img src="{{ pro.image | img_url: '90x90', scale: 2 }}"
                                        alt="{{ pro.image.alt | escape }}">
                                </a>
                            </div>

                            <div class="pro-info">
                                <div class="info-title d-flex">
                                <a class="pro-info__title" href="{{ pro.url }}">{{ pro.product.title }}</a>
                                <span class="info-price__scribe line-item__price--highlight">{{pro.original_price | money}}</span>
                                <span class="info-price ">{{ pro.final_line_price | money }}</span>
                                </div>
                 
                                <div class="info-style d-flex">
                                    <span class="style-title">{{ pro.variant.title }}</span>
                                    <span class="style-num">× {{ pro.quantity }}</span>
                                </div>

                                <p class="pro-info__text pro-info__discount">USE COUPONS OR {{pro.line_level_total_discount | money}}</p>
                                <p class="pro-info__text pro-info__paid">THE ACTUAL PAYMENT {{ pro.final_line_price | money }}</p>
                            </div>
                        </div>
                    </li>
                    {%- endfor -%}
                </ul>
                <div class="order-footer">
                    <div class="shipping">
                        <span>{{ 'customer.order.shipping' | t }}:{{ order.shipping_price | money }}</span>
                    </div>
                    <div class="all-total">
                        <span class="total">{{ 'customer.order.total' | t }}:{{ order.total_price | money }}</span>
                    </div>
                </div>
            </div>
            {%- endif -%}
            {%- endfor -%}
            {%- render 'pagination', paginate: paginate -%}
            {% assign dm_paginate_by = paginate.page_size %}
            {%- endpaginate -%}
            {%- endif -%}
            {%- if empty_state -%}
            <div class="card__section">
                <div class="empty-state empty-state--extra-tight">
                  <div class="empty-state__icon">
                    {%- render 'icon', icon: 'package' -%}
                    <span class="empty-state__count">0</span>
                  </div>
  
                  <p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
  
                  <div class="empty-state__button-container">
                    <a href="{{ routes.all_products_collection_url }}" class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
                  </div>
                </div>
              </div>
            {%- endif -%}
        </div>
        <div class="card order-item__card"  aria-hidden="true" data-index="5">
            {%- assign empty_state = true -%}
            {%- if customer.orders_count != 0 -%}
            {%- paginate customer.orders by 8 -%}
            {%- for order in customer.orders -%}
            {% if order.financial_status=='fulfilled' %}
            {%- assign empty_state = false -%}
            <div class="order-box">
                <div class="order-title">
                    <div class="title-info d-flex">
                        <span class="title-info-name"><span data-url="{{ order.customer_url }}">{{ 'customer.order.order' | t  }}:{{ order.name }}</span></span>
                        <span class="title-info-data">{{ 'customer.order.date' | t }}:{{ order.created_at | date:   format: 'month_day_year' }}</span>
                    </div>
                    <div class="title-state">
                        <span>{{ order.financial_status_label }}</span>&nbsp;
                        <span>{{ order.fulfillment_status }}</span>
                    </div>
                </div>
                <ul class="order-body">
                    {%- for pro in order.line_items -%}
                    <li class="order-item__card-body">
                        <div class="d-flex" >
                            <div class="pro-img">
                                <a href="{{ pro.url }}">
                                    <img src="{{ pro.image | img_url: '90x90', scale: 2 }}"
                                        alt="{{ pro.image.alt | escape }}">
                                </a>
                            </div>

                            <div class="pro-info">
                                <div class="info-title d-flex">
                                <a class="pro-info__title" href="{{ pro.url }}">{{ pro.product.title }}</a>
                                <span class="info-price__scribe line-item__price--highlight">{{pro.original_price | money}}</span>
                                <span class="info-price ">{{ pro.final_line_price | money }}</span>
                                </div>
                 
                                <div class="info-style d-flex">
                                    <span class="style-title">{{ pro.variant.title }}</span>
                                    <span class="style-num">× {{ pro.quantity }}</span>
                                </div>

                                <p class="pro-info__text pro-info__discount">USE COUPONS OR {{pro.line_level_total_discount | money}}</p>
                                <p class="pro-info__text pro-info__paid">THE ACTUAL PAYMENT {{ pro.final_line_price | money }}</p>
                            </div>
                        </div>
                    </li>
                    {%- endfor -%}
                </ul>
                <div class="order-footer">
                    <div class="shipping">
                        <span>{{ 'customer.order.shipping' | t }}:{{ order.shipping_price | money }}</span>
                    </div>
                    <div class="all-total">
                        <span class="total">{{ 'customer.order.total' | t }}:{{ order.total_price | money }}</span>
                    </div>
                </div>
            </div>
            {%- endif -%}
            {%- endfor -%}
            {%- render 'pagination', paginate: paginate -%}
            {% assign dm_paginate_by = paginate.page_size %}
            {%- endpaginate -%}
            {%- endif -%}
            {%- if empty_state -%}
            <div class="card__section">
                <div class="empty-state empty-state--extra-tight">
                  <div class="empty-state__icon">
                    {%- render 'icon', icon: 'package' -%}
                    <span class="empty-state__count">0</span>
                  </div>
  
                  <p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
  
                  <div class="empty-state__button-container">
                    <a href="{{ routes.all_products_collection_url }}" class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
                  </div>
                </div>
              </div>
            {%- endif -%}
        </div>
        <div class="card order-item__card"  aria-hidden="true" data-index="6">
            {%- assign empty_state = true -%}
            {%- if customer.orders_count != 0 -%}
            {%- paginate customer.orders by 8 -%}
            {%- for order in customer.orders -%}
            {% if order.financial_status=='paid' %}
            {%- assign empty_state = false -%}
            <div class="order-box">
                <div class="order-title">
                    <div class="title-info d-flex">
                        <span class="title-info-name"><span data-url="{{ order.customer_url }}">{{ 'customer.order.order' | t  }}:{{ order.name }}</span></span>
                        <span class="title-info-data">{{ 'customer.order.date' | t }}:{{ order.created_at | date:   format: 'month_day_year' }}</span>
                    </div>
                    <div class="title-state">
                        <span>{{ order.financial_status_label }}</span>&nbsp;
                        <span>{{ order.fulfillment_status }}</span>
                    </div>
                </div>
                <ul class="order-body">
                    {%- for pro in order.line_items -%}
                    <li class="order-item__card-body">
                        <div class="d-flex" >
                            <div class="pro-img">
                                <a href="{{ pro.url }}">
                                    <img src="{{ pro.image | img_url: '90x90', scale: 2 }}"
                                        alt="{{ pro.image.alt | escape }}">
                                </a>
                            </div>

                            <div class="pro-info">
                                <div class="info-title d-flex">
                                <a class="pro-info__title" href="{{ pro.url }}">{{ pro.product.title }}</a>
                                <span class="info-price__scribe line-item__price--highlight">{{pro.original_price | money}}</span>
                                <span class="info-price ">{{ pro.final_line_price | money }}</span>
                                </div>
                 
                                <div class="info-style d-flex">
                                    <span class="style-title">{{ pro.variant.title }}</span>
                                    <span class="style-num">× {{ pro.quantity }}</span>
                                </div>

                                <p class="pro-info__text pro-info__discount">USE COUPONS OR {{pro.line_level_total_discount | money}}</p>
                                <p class="pro-info__text pro-info__paid">THE ACTUAL PAYMENT {{ pro.final_line_price | money }}</p>
                            </div>
                        </div>
                    </li>
                    {%- endfor -%}
                </ul>
                <div class="order-footer">
                    <div class="shipping">
                        <span>{{ 'customer.order.shipping' | t }}:{{ order.shipping_price | money }}</span>
                    </div>
                    <div class="all-total">
                        <span class="total">{{ 'customer.order.total' | t }}:{{ order.total_price | money }}</span>
                    </div>
                </div>
            </div>
            {%- endif -%}
            {%- endfor -%}
            {%- render 'pagination', paginate: paginate -%}
            {% assign dm_paginate_by = paginate.page_size %}
            {%- endpaginate -%}
            {%- endif -%}
            {%- if empty_state -%}
            <div class="card__section">
                <div class="empty-state empty-state--extra-tight">
                  <div class="empty-state__icon">
                    {%- render 'icon', icon: 'package' -%}
                    <span class="empty-state__count">0</span>
                  </div>
  
                  <p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
  
                  <div class="empty-state__button-container">
                    <a href="{{ routes.all_products_collection_url }}" class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
                  </div>
                </div>
              </div>
            {%- endif -%}
        </div>
      

      

    </div>
</div>


<style>
    .my-order__title {
        padding: 0 0 1rem;
        text-align: center;
    }

    .orders-nav {
        justify-content: center;
    }

    .title-info-name {
        cursor: pointer;

    }

    .order-render__view , 
    .order-item__card>.card__section 
    , .order-box
     {
        background-color: #fff;
    }

    .info-title,
    .info-style,
    .title-info {
        justify-content: space-between;
    }

    .title-state {
        /* float: right; */
        text-align: right;
    }

    .info-style {
        color: #9d9898;
    }

    .pro-info__discount {
        color: #cf0e0e;
        font-size: 0.9rem;
    }

    .pro-info__text {
        text-align: right;
        margin-bottom: 0;
    }

    .pro-info__title,
    .pro-info__paid {
        font-weight: 600;
    }

    .info-price__scribe {
        text-decoration: line-through;
    }

    .orders-nav__list {
        justify-content: center;
    }

    .orders-nav__list svg {
        font-size: 1.4rem;
    }

    .pro-info {
        /* display: inline-block; */
        padding: 0 2rem;
        width: 100%;
    }

    .order-box {
        padding: 1rem 1rem;
        margin-bottom: 1rem;
    }

    .order-item__card-body {
        padding: 1rem 0;
        margin-bottom: 2rem;
        border-bottom: 1px solid #ccc;
    }

    .orders-nav__item {
        margin: 0 20px;
        cursor: pointer;
    }

    .order-item__card[aria-hidden="true"] {
        display: none;
    }

    .order-footer {
        text-align: right;
    }

    .order-item__card[aria-hidden="false"] {
        display: block;
    }

    .orders-nav__item[data-action="true"] {
        color: #770202;
        border-bottom: 1px solid #770202;
    }
</style>

<script>
    (function () {
        function getSectionInnerHTML(html, selector = '.shopify-section') {
            return new DOMParser()
                .parseFromString(html, 'text/html')
                .querySelector(selector).innerHTML;
        }
        const orderBox = document.querySelector('.order-view__box')
        orderBox.addEventListener('click', e => {
            const target = e.target
            if (target.dataset.action !== 'false' && target.parentElement.dataset.action !== 'false') return
            const nav = target.dataset.action ? target : target.parentElement
            const preNav = orderBox.querySelector('.orders-nav__item[data-action="true"]')
            const preView = document.querySelector('.order-item__card[aria-hidden="false"]')
            const openOrederView = document.querySelector(`.order-item__card[data-index="${nav.dataset.index}"]`)
            preNav.dataset.action = false
            nav.dataset.action = true
            preView.setAttribute('aria-hidden', true)
            openOrederView.setAttribute("aria-hidden", false)
            let hashUrl=target.textContent.replace(/\s*|[\r\n]/g,'')
            window.location.hash ="Orders+"+hashUrl
        })

        document.querySelector('.order__render-view').addEventListener('click', e => {
            if (e.target.classList.contains('title-info-name')) {
                const target = e.target
                const orderUrl = target.dataset.url
                
                fetch(orderUrl, {
                    credentials: 'same-origin',
                    method: 'GET'
                }).then(response => response.text())
                    .then(html => {
                        document.querySelector('.card.my_orders').innerHTML = getSectionInnerHTML(html, '.order-summary')
                        window.scroll(0, 0)
                    })
            }
        })



    })()

</script>
</div>